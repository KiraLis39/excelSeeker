<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">

    <changeSet author="KiraLis39" id="0000000001">
        <sql>
            create table parsed_document_row
            (
                uuid        uuid                    not null
                    constraint parsed_document_pkey primary key,
                doc_name    varchar(255)            not null,
                sheet_name  varchar(64)             not null,
                row_data    varchar(1023),
                parsed_date timestamp default now() not null
            );
            comment
            on column parsed_document_row.doc_name is 'Имя документа-источника данных';
            alter table parsed_document_row owner to seeker;

            create table files_story
            (
                uuid         uuid                    not null
                    constraint files_story_pk primary key,
                doc_name     varchar(255)            not null,
                doc_size     bigint                  not null,
                rows_count   integer,
                sheets_count integer,
                load_date    timestamp default now() not null,
                constraint name_size_uniq_ind unique (doc_name, doc_size)
            );
            comment
            on table files_story is 'Информация о загруженных ранее файлах';
            alter table files_story owner to seeker;
        </sql>
    </changeSet>
</databaseChangeLog>
